#!/bin/bash

# Run All Tests - Virtual Environment Wrapper
# This script activates the virtual environment and runs the test suite

# Get the project root directory (scripts -> builder-utils -> project root)
PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"

# Check if .venv exists
if [ ! -d "$PROJECT_ROOT/.venv" ]; then
    echo "‚ùå Error: Virtual environment not found at $PROJECT_ROOT/.venv"
    echo "Please create a virtual environment first:"
    echo "  python -m venv .venv"
    echo "  source .venv/bin/activate"
    echo "  pip install -e ."
    exit 1
fi

# Activate virtual environment and run the command
source "$PROJECT_ROOT/.venv/bin/activate"
cd "$PROJECT_ROOT"
python -m builder_utils.tests.run_all_tests "$@"
